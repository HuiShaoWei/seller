webpackJsonp([22],{"3kXT":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("Xxa5"),r=e.n(s),n=e("WBHA"),i=e.n(n),l=e("2Uyi");function o(t){return function(){var a=t.apply(this,arguments);return new Promise(function(t,e){return function s(r,n){try{var i=a[r](n),l=i.value}catch(t){return void e(t)}if(!i.done)return Promise.resolve(l).then(function(t){s("next",t)},function(t){s("throw",t)});t(l)}("next")})}}var c=e("Icdr");e("4UDB");var p={data:function(){return{timeArray:[],startTime:null,endTime:null,startVal:0,separator:"",isActive:!0,linkBtn:["周","月","年"],changeActive:0,type:99,current:0,dataXChange:[],dataYchange:[],point:[0,0,0,0,0,0,0],funLei:l.a,datalist:[],tableData:[],dataAna:[0,0,0,0,0,0],rowsPerPage:15,page:1,total:0,pageSizes:[10,15,20,25],payData:[],visitors:[]}},components:{countTo:i.a},methods:{init:function(){var t=this;return o(r.a.mark(function a(){var e,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e={sid:localStorage.getItem("id"),startTime:t.startTime,endTime:t.endTime,queryType:t.type},a.next=3,t.$Http.productOver(e);case 3:0===(s=a.sent).code&&(t.dataAna=s.data);case 5:case"end":return a.stop()}},a,t)}))()},scaleData:function(t){return t.scale+"%"},scaleData1:function(t){return t.scale+"%"},numData:function(t){return t.num.toFixed(2)},dataArray:function(){if(0!=localStorage.getItem("id"))return null==this.timeArray?(this.startTime=null,this.endTime=null,this.type=99,this.init(),!1):0==this.timeArray.length?(this.startTime=null,this.endTime=null,this.type=99,this.init(),!1):(this.startTime=this.timeArray[0],this.endTime=this.timeArray[1],this.type=0,this.init(),!1);this.$message({type:"error",message:"请先认证店铺信息",offset:80})},dataChanges:function(t){var a=this;return o(r.a.mark(function e(){var s,n,i,l,o,c,p,u,d;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=t){e.next=32;break}if(a.datalist=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a.type=6,s={sid:localStorage.getItem("id"),queryType:a.type,page:a.page,rows:a.rowsPerPage},0!=localStorage.getItem("id")){e.next=8;break}a.$message({type:"error",message:"请先认证店铺信息",offset:80}),e.next=17;break;case 8:return e.next=10,a.$Http.productTrend(s);case 10:return n=e.sent,e.next=13,a.$Http.productTable(s);case 13:i=e.sent,a.tableData=i.data.items,a.total=i.data.total,a.datalist=n.data;case 17:a.changeActive=t,e.t0=a.datalist.length,e.next=29===e.t0?21:30===e.t0?23:31===e.t0?25:27;break;case 21:return a.dataXChange=a.funLei.getMonthDay(29),e.abrupt("break",27);case 23:return a.dataXChange=a.funLei.getMonthDay(30),e.abrupt("break",27);case 25:return a.dataXChange=a.funLei.getMonthDay(31),e.abrupt("break",27);case 27:a.point=a.datalist,a.polyline(),a.funLei.getMonthDay(31),e.next=76;break;case 32:if(2!=t){e.next=55;break}if(a.datalist=[0,0,0,0,0,0,0,0,0,0,0,0],a.type=7,l={sid:localStorage.getItem("id"),queryType:a.type,page:a.page,rows:a.rowsPerPage},0!=localStorage.getItem("id")){e.next=40;break}a.$message({type:"error",message:"请先认证店铺信息",offset:80}),e.next=49;break;case 40:return e.next=42,a.$Http.productTrend(l);case 42:return o=e.sent,e.next=45,a.$Http.productTable(l);case 45:c=e.sent,a.tableData=c.data.items,a.total=c.data.total,a.datalist=o.data;case 49:a.changeActive=t,a.dataXChange=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],a.point=a.datalist,a.polyline(),e.next=76;break;case 55:if(a.datalist=[0,0,0,0,0,0,0],a.type=5,p={sid:localStorage.getItem("id"),queryType:a.type,page:a.page,rows:a.rowsPerPage},0!=localStorage.getItem("id")){e.next=62;break}a.$message({type:"error",message:"请先认证店铺信息",offset:80}),e.next=71;break;case 62:return e.next=64,a.$Http.productTrend(p);case 64:return u=e.sent,e.next=67,a.$Http.productTable(p);case 67:d=e.sent,a.tableData=d.data.items,a.total=d.data.total,a.datalist=u.data;case 71:t=0,a.changeActive=t,a.dataXChange=["周一","周二","周三","周四","周五","周六","周日"],a.point=a.datalist,a.polyline();case 76:case"end":return e.stop()}},e,a)}))()},getData:function(t){switch(t){case 1:this.type=1,this.current=t,0==localStorage.getItem("id")?this.$message({type:"error",message:"请先认证店铺信息",offset:80}):this.init();break;case 2:this.type=2,this.current=t,0==localStorage.getItem("id")?this.$message({type:"error",message:"请先认证店铺信息",offset:80}):this.init();break;case 3:this.type=3,this.current=t,0==localStorage.getItem("id")?this.$message({type:"error",message:"请先认证店铺信息",offset:80}):this.init();break;default:this.type=4,this.current=t,0==localStorage.getItem("id")?this.$message({type:"error",message:"请先认证店铺信息",offset:80}):this.init()}},polyline:function(){var t=this;this.$nextTick(function(){var a=t.dataXChange,e=(t.dataYchange,{title:{text:""},itemStyle:{color:"#3399FF"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#3399FF"}}},legend:{data:["商品统计"]},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:a}],yAxis:[{type:"value"}],series:[{name:"商品统计",type:"line",stack:"总量",label:{normal:{show:!0,position:"top",color:"#3399FF"}},areaStyle:{},data:t.point}]});c.init(t.$refs.lines).setOption(e)})},proTop:function(){var t=this;return o(r.a.mark(function a(){var e,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e={sid:localStorage.getItem("id")},a.next=3,t.$Http.productTop(e);case 3:s=a.sent,t.payData=s.data.payment,t.visitors=s.data.visitor;case 6:case"end":return a.stop()}},a,t)}))()},handleSizeChange:function(t){this.dataChanges()},handleCurrentChange:function(t){this.dataChanges()},nextPage:function(){this.page+=1,this.dataChanges()},prevPage:function(){this.page-=1,this.dataChanges()}},mounted:function(){this.polyline(),0==localStorage.getItem("id")?this.$message({type:"error",message:"请先认证店铺信息",offset:80}):(this.dataArray(),this.dataChanges(),this.proTop())}},u={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"traffic"},[e("v-card",[e("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[e("el-form-item",[e("div",{staticClass:"header"},[e("div",[e("span",{staticClass:"demonstration"},[t._v("选择时段")]),t._v("  \n            "),e("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.dataArray},model:{value:t.timeArray,callback:function(a){t.timeArray=a},expression:"timeArray"}})],1),t._v(" "),e("div",{staticClass:"right"},[e("el-button",{class:1==t.current?"active":"",on:{click:function(a){return t.getData(1)}}},[t._v("今天")]),t._v(" "),e("el-button",{class:2==t.current?"active":"",on:{click:function(a){return t.getData(2)}}},[t._v("昨天")]),t._v(" "),e("el-button",{class:3==t.current?"active":"",on:{click:function(a){return t.getData(3)}}},[t._v("最近七天")]),t._v(" "),e("el-button",{class:4==t.current?"active":"",on:{click:function(a){return t.getData(4)}}},[t._v("最近30天")])],1)])]),t._v(" "),e("el-form-item",[e("p",{staticClass:"title"},[t._v("数据概览")]),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:3}},[e("p",{staticClass:"b-title"},[t._v("商品概况")])]),t._v(" "),e("el-col",{attrs:{span:7}},[e("div",{staticClass:"grid-content bg-purple"},[e("p",{staticClass:"visitors"},[t._v("出售商品数")]),t._v(" "),e("p",{staticClass:"vis-num"},[e("countTo",{attrs:{separator:t.separator,startVal:t.startVal,endVal:t.dataAna[0],duration:3e3}})],1)])]),t._v(" "),e("el-col",{attrs:{span:7}},[e("div",{staticClass:"grid-content bg-purple"},[e("p",{staticClass:"visitors"},[t._v("仓库商品数")]),t._v(" "),e("p",{staticClass:"vis-num"},[e("countTo",{attrs:{separator:t.separator,startVal:t.startVal,endVal:t.dataAna[1],duration:3e3}})],1)])]),t._v(" "),e("el-col",{attrs:{span:7}},[e("div",{staticClass:"grid-content bg-purple"},[e("p",{staticClass:"visitors"},[t._v("被访问商品数")]),t._v(" "),e("p",{staticClass:"vis-num"},[e("countTo",{attrs:{separator:t.separator,startVal:t.startVal,endVal:t.dataAna[2],duration:3e3}})],1)])])],1),t._v(" "),e("el-divider"),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:3}},[e("p",{staticClass:"b-title"},[t._v("商品流量")])]),t._v(" "),e("el-col",{attrs:{span:7}},[e("div",{staticClass:"grid-content bg-purple"},[e("p",{staticClass:"visitors"},[t._v("被访问数")]),t._v(" "),e("p",{staticClass:"vis-num"},[e("countTo",{attrs:{separator:t.separator,startVal:t.startVal,endVal:t.dataAna[3],duration:3e3}})],1)])])],1),t._v(" "),e("el-divider"),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:3}},[e("p",{staticClass:"b-title"},[t._v("商品转化")])]),t._v(" "),e("el-col",{attrs:{span:7}},[e("div",{staticClass:"grid-content bg-purple"},[e("p",{staticClass:"visitors"},[t._v("下单数")]),t._v(" "),e("p",{staticClass:"vis-num"},[e("countTo",{attrs:{separator:t.separator,startVal:t.startVal,endVal:t.dataAna[4],duration:3e3}})],1)])]),t._v(" "),e("el-col",{attrs:{span:7}},[e("div",{staticClass:"grid-content bg-purple"},[e("p",{staticClass:"visitors"},[t._v("支付数")]),t._v(" "),e("p",{staticClass:"vis-num"},[e("countTo",{attrs:{separator:t.separator,startVal:t.startVal,endVal:t.dataAna[5],duration:3e3}})],1)])])],1),t._v(" "),e("el-divider")],1),t._v(" "),e("el-form-item",[e("p",{staticClass:"title"},[t._v("商品趋势")]),t._v(" "),e("p",{staticClass:"dataView"},t._l(t.linkBtn,function(a,s){return e("span",{key:s},[e("el-link",{class:{active:t.changeActive==s},attrs:{type:"primary",underline:!1},on:{click:function(a){return t.dataChanges(s)}}},[t._v(t._s(a))])],1)}),0),t._v(" "),e("div",{staticStyle:{width:"100%"}},[e("div",{ref:"lines",staticStyle:{width:"100%",height:"250px","margin-top":"40px"},attrs:{id:"polyline"}})])]),t._v(" "),e("el-form-item",{attrs:{id:"tabs"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[e("el-table-column",{attrs:{prop:"time",label:"时间"}}),t._v(" "),e("el-table-column",{attrs:{prop:"itemAmount",label:"出售商品"}}),t._v(" "),e("el-table-column",{attrs:{prop:"itemAllAmount",label:"累计出售商品"}}),t._v(" "),e("el-table-column",{attrs:{prop:"visits",label:"被访问商品"}})],1),t._v(" "),e("div",{staticClass:"pages"},[e("el-pagination",{staticClass:"tablePagin",attrs:{background:"","page-sizes":t.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:t.total,"pager-count":5,"page-size":t.rowsPerPage,"current-page":t.page},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:pageSize":function(a){t.rowsPerPage=a},"update:page-size":function(a){t.rowsPerPage=a},"update:currentPage":function(a){t.page=a},"update:current-page":function(a){t.page=a},"prev-click":t.prevPage,"next-click":t.nextPage}})],1)],1),t._v(" "),e("el-form-item",[e("p",{staticClass:"title"},[t._v("商品分析")]),t._v(" "),e("el-row",{attrs:{gutter:24}},[e("el-col",{attrs:{span:12}},[e("p",{staticClass:"table-title"},[t._v("TOP10支付金额")]),t._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.payData}},[e("el-table-column",{attrs:{type:"index",label:"排名",width:"80"}}),t._v(" "),e("el-table-column",{attrs:{prop:"goodName",label:"商品名称"}}),t._v(" "),e("el-table-column",{attrs:{prop:"num",formatter:t.numData,label:"支付金额"}}),t._v(" "),e("el-table-column",{attrs:{prop:"scale",formatter:t.scaleData1,label:"占比"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("p",{staticClass:"table-title"},[t._v("TOP10访客数")]),t._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.visitors}},[e("el-table-column",{attrs:{type:"index",label:"排名",width:"80"}}),t._v(" "),e("el-table-column",{attrs:{prop:"goodName",label:"商品名称"}}),t._v(" "),e("el-table-column",{attrs:{prop:"num",label:"访客数"}}),t._v(" "),e("el-table-column",{attrs:{prop:"scale",formatter:t.scaleData,label:"支付转化率"}})],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var d=e("VU/8")(p,u,!1,function(t){e("EZOU")},"data-v-66158eb9",null);a.default=d.exports},EZOU:function(t,a){}});
//# sourceMappingURL=22.11658c1c2f961ff86bc6.js.map