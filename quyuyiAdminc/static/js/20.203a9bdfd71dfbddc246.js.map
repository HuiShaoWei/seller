{"version":3,"sources":["webpack:///src/pages/item/Test.vue","webpack:///./src/pages/item/Test.vue?53dd","webpack:///./src/pages/item/Test.vue"],"names":["Test","inject","data","qiniuData","key","token","upload_qiniu_url","upload_qiniu_addr","imageUrl","currentdate","created","date","Date","month","getMonth","strDate","getDate","this","getFullYear","getHours","getMinutes","getSeconds","methods","beforeAvatarUpload","file","name","isJPG","type","isPNG","isLt2M","size","$message","error","handleAvatarSuccess","res","console","log","response","handleError","message","duration","item_Test","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","attrs","drag","action","show-file-list","on-success","on-error","before-upload","src","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"2HAuBA,IAAAA,GACAC,QAAA,UACAC,KAFA,WAGA,OACAC,WACAC,IAAA,GAEAC,MAAA,sIAGAC,iBAAA,8BAEAC,kBAAA,0BACAC,SAAA,GACAC,YAAA,KAGAC,QAjBA,WAkBA,IAAAC,EAAA,IAAAC,KAGAC,EAAAF,EAAAG,WAAA,EACAC,EAAAJ,EAAAK,UACAH,GAAA,GAAAA,GAAA,IACAA,EAAA,IAAAA,GAEAE,GAAA,GAAAA,GAAA,IACAA,EAAA,IAAAA,GAEAE,KAAAR,YAAAE,EAAAO,cAVA,IAUAL,EAVA,IAUAE,EACA,IAAAJ,EAAAQ,WAVA,IAUAR,EAAAS,aAVA,IAWAT,EAAAU,aACAV,EAAAO,eAEAI,SACAC,mBAAA,SAAAC,GACAP,KAAAd,UAAAC,IAAAa,KAAAR,YAAA,IAAAe,EAAAC,KACA,IAAAC,EAAA,eAAAF,EAAAG,KACAC,EAAA,cAAAJ,EAAAG,KACAE,EAAAL,EAAAM,KAAA,YACA,OAAAJ,GAAAE,EAIAC,OAAA,GACAZ,KAAAc,SAAAC,MAAA,kBACA,IALAf,KAAAc,SAAAC,MAAA,sBACA,IAOAC,oBAAA,SAAAC,EAAAV,GACAP,KAAAT,SAAAS,KAAAV,kBAAA2B,EAAA9B,IACA+B,QAAAC,IAAA,SAAAF,GACAC,QAAAC,IAAA,UAAAnB,KAAAV,kBAAA,IAAAiB,EAAAa,SAAAjC,MAEAkC,YAAA,SAAAJ,GACAjB,KAAAc,UACAQ,QAAA,OACAC,SAAA,IACAb,KAAA,eC9Eec,GADEC,OAFjB,WAA0B,IAAAC,EAAA1B,KAAa2B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,cAAwBL,EAAAM,GAAA,GAAAN,EAAAO,GAAA,KAAAJ,EAAA,aAAwCE,YAAA,cAAAG,OAAiCC,KAAA,GAAAC,OAAAV,EAAArC,iBAAAgD,kBAAA,EAAAC,aAAAZ,EAAAV,oBAAAuB,WAAAb,EAAAL,YAAAmB,gBAAAd,EAAApB,mBAAArB,KAAAyC,EAAAxC,aAA4LwC,EAAA,SAAAG,EAAA,OAA2BE,YAAA,SAAAG,OAA4BO,IAAAf,EAAAnC,YAAoBsC,EAAA,OAAYE,YAAA,eAAyBF,EAAA,KAAUE,YAAA,mBAA6BL,EAAAO,GAAA,KAAAJ,EAAA,OAAwBE,YAAA,oBAA8BL,EAAAO,GAAA,aAAAJ,EAAA,MAAAH,EAAAO,GAAA,cAAAP,EAAAO,GAAA,KAAAJ,EAAA,OAA0EE,YAAA,iBAAAG,OAAoCQ,KAAA,OAAaA,KAAA,QAAYhB,EAAAO,GAAA,kCAE1sBU,iBADjB,WAAoC,IAAahB,EAAb3B,KAAa4B,eAA0BC,EAAvC7B,KAAuC8B,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,UAAoBF,EAAA,MAApG7B,KAAoGiC,GAAA,mCCExI,IAcAW,EAdyBC,EAAQ,OAcjCC,CACE/D,EACAyC,GATF,EAVA,SAAAuB,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/20.203a9bdfd71dfbddc246.js","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"title\"><h2>ElementUI的Upload上传图片到七牛云</h2></div>\n    <el-upload\n      class=\"upload-demo\"\n      drag\n      :action=\"upload_qiniu_url\"\n      :show-file-list=\"false\"\n      :on-success=\"handleAvatarSuccess\"\n      :on-error=\"handleError\"\n      :before-upload=\"beforeAvatarUpload\"\n      :data=\"qiniuData\">\n      <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\n      <div v-else class=\"el-default\">\n        <i class=\"el-icon-upload\"></i>\n        <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\n      </div>\n      <div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png文件，且不超过2MB</div>\n    </el-upload>\n  </div>\n</template>\n\n<script>\n  export default {\n    inject: ['reload'], // 注入依赖刷新当前页面\n    data() {\n      return {\n        qiniuData: {\n          key: \"\",\n          // 七牛云 tooken 有效期 50年\n          token: \"0tJG2oh5JnpsneBzCn3CnP4N1bH3HZgn6HJoHQAt:yuA83mJmMRtMHE53vBPuTr8kZcw=:eyJzY29wZSI6InF1eXV5aWltYWdlIiwiZGVhZGxpbmUiOjMxNzM1MDA1ODV9\"\n        },\n        // 七牛云上传储存区域的上传域名（华东、华北、华南、北美、东南亚）\n        upload_qiniu_url: \"http://upload-z2.qiniup.com\", // 华南\n        // 七牛云返回储存图片的子域名\n        upload_qiniu_addr: \"http://image.quyuyi.com\",\n        imageUrl: \"\",\n        currentdate: '', // 年月日时分秒\n      };\n    },\n    created() {\n      var date = new Date();\n      var seperator1 = \"-\";\n      var seperator2 = \":\";\n      var month = date.getMonth() + 1;\n      var strDate = date.getDate();\n      if (month >= 1 && month <= 9) {\n        month = \"0\" + month;\n      }\n      if (strDate >= 0 && strDate <= 9) {\n        strDate = \"0\" + strDate;\n      }\n      this.currentdate = date.getFullYear() + seperator1 + month + seperator1 + strDate\n        + \"_\" + date.getHours() + seperator2 + date.getMinutes()\n        + seperator2 + date.getSeconds();//年月日时分秒\n      var currentmonth = date.getFullYear() + seperator1 + month;//获取年月\n    },\n    methods: {\n      beforeAvatarUpload: function(file) {\n        this.qiniuData.key = this.currentdate +'_'+ file.name;\n        const isJPG = file.type === \"image/jpeg\";\n        const isPNG = file.type === \"image/png\";\n        const isLt2M = file.size / 1024 / 1024 < 2;\n        if (!isJPG && !isPNG) {\n          this.$message.error(\"图片只能是 JPG/PNG 格式!\");\n          return false;\n        }\n        if (!isLt2M) {\n          this.$message.error(\"图片大小不能超过 2MB!\");\n          return false;\n        }\n      },\n      handleAvatarSuccess: function(res, file) {\n        this.imageUrl = this.upload_qiniu_addr + res.key;\n        console.log(\"res =>\",res);\n        console.log(\"file =>\",this.upload_qiniu_addr+'/'+file.response.key); // 图片回显\n      },\n      handleError: function(res) {\n        this.$message({\n          message: \"上传失败\",\n          duration: 2000,\n          type: \"warning\"\n        });\n      }\n    }\n  };\n</script>\n\n<style scode>\n  .title{\n    margin:90px 0 40px 0;\n  }\n  .el-default .el-icon-upload {\n    margin-top: 125px;\n  }\n  .el-upload-dragger {\n    width: 350px;\n    height: 350px;\n  }\n  .avatar {\n    width: 350px;\n    height: 350px;\n    display: block;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/item/Test.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_vm._m(0),_vm._v(\" \"),_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"drag\":\"\",\"action\":_vm.upload_qiniu_url,\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"on-error\":_vm.handleError,\"before-upload\":_vm.beforeAvatarUpload,\"data\":_vm.qiniuData}},[(_vm.imageUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.imageUrl}}):_c('div',{staticClass:\"el-default\"},[_c('i',{staticClass:\"el-icon-upload\"}),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"将文件拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传jpg/png文件，且不超过2MB\")])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title\"},[_c('h2',[_vm._v(\"ElementUI的Upload上传图片到七牛云\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7092f15b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/item/Test.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7092f15b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Test.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Test.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Test.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7092f15b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Test.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/item/Test.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}