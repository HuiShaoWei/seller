webpackJsonp([8],{FwQn:function(e,t){},Xlnm:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("LRhB"),a=[{value:0,label:"A农、林、牧、渔业"},{value:1,label:"B采矿业"},{value:2,label:"C制造业"},{value:3,label:"D电力、热力、燃气及水生产和供应业"},{value:4,label:"E建筑业"},{value:5,label:"F交通运输、仓储和邮政业"},{value:6,label:"G信息传输、软件和信息技术服务业"},{value:7,label:"H批发和零售业"},{value:8,label:"I住宿和餐饮业"},{value:9,label:"J金融业"},{value:10,label:"K房地产业"},{value:11,label:"L租赁和商务服务业"},{value:12,label:"M科学研究和技术服务业"},{value:13,label:"N水利、环境和公共设施管理业"},{value:14,label:"O居民服务、修理和其他服务业"},{value:15,label:"P教育"},{value:16,label:"Q卫生和社会工作"},{value:17,label:"R文化、体育和娱乐业"},{value:18,label:"S公共管理、社会保障和社会组织"},{value:19,label:"T国际组织"}],o={name:"Infos",data:function(){return{cityData:s.a,industry:a,projectFrom:{labelPosition:"right",basicImg:!1,basicArray:[],moreImages:"",basicImgList:[],title:"",fundsFirst:0,fundsSecond:0,basicImg1:!1,basicArray1:[],moreImages1:"",basicImgList1:[],contact:"",area:"",areaList:"",industry:"",industryVlue:"",financing:"",shareFirst:0,shareSecond:0,minimumYears:0},qiniuData:{key:"",token:"0tJG2oh5JnpsneBzCn3CnP4N1bH3HZgn6HJoHQAt:yuA83mJmMRtMHE53vBPuTr8kZcw=:eyJzY29wZSI6InF1eXV5aWltYWdlIiwiZGVhZGxpbmUiOjMxNzM1MDA1ODV9"},upload_qiniu_url:"http://upload-z2.qiniup.com",upload_qiniu_addr:"http://image.quyuyi.com",imageUrl:"",currentdate:""}},methods:{getTime:function(){var e=new Date,t=e.getMonth()+1,r=e.getDate();t>=1&&t<=9&&(t="0"+t),r>=0&&r<=9&&(r="0"+r),this.currentdate=e.getFullYear()+"-"+t+"-"+r+"_"+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds();e.getFullYear()},beforeUpload:function(e){this.qiniuData.key=this.currentdate+"_"+e.name;var t="image/jpeg"===e.type,r="image/png"===e.type,s=e.size/1024/1024<2;return t||r?s?void 0:(this.$message.error("图片大小不能超过 2MB!"),!1):(this.$message.error("图片只能是 JPG/PNG 格式!"),!1)},handlePictureCardPreview:function(e){this.projectFrom.moreImages=e.url,this.projectFrom.basicImg=!0},handleError:function(){this.$message({message:"上传失败",duration:2e3,type:"warning"})},success:function(e,t,r){this.projectFrom.basicImgList.push(this.upload_qiniu_addr+"/"+e.key),this.getTime()},beforeUpload1:function(e){this.qiniuData.key=this.currentdate+"_"+e.name;var t="image/jpeg"===e.type,r="image/png"===e.type,s=e.size/1024/1024<2;return t||r?s?void 0:(this.$message.error("图片大小不能超过 2MB!"),!1):(this.$message.error("图片只能是 JPG/PNG 格式!"),!1)},handlePictureCardPreview1:function(e){this.projectFrom.moreImages1=e.url,this.projectFrom.basicImg1=!0},handleError1:function(){this.$message({message:"上传失败",duration:2e3,type:"warning"})},success1:function(e,t,r){this.projectFrom.basicImgList1.push(this.upload_qiniu_addr+"/"+e.key),this.getTime()},getArea:function(e){console.log("value",e),this.projectFrom.areaList=e.toString().replace(/,/g,"-"),console.log("this.projectFrom.areaList",this.projectFrom.areaList)},getIndustry:function(e){var t;t=this.industry.find(function(t){return t.value===e}),this.projectFrom.industryVlue=t.label},changeValue:function(){this.$emit("changeValue",this.projectFrom)}},created:function(){this.getTime()}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"infos-wrapper"},[r("div",{staticClass:"infos"},[r("h3",{staticClass:"infos-title"},[e._v("基本信息")]),e._v(" "),r("el-form",{ref:"projectFrom",staticClass:"demo-ruleForm",attrs:{"label-position":e.projectFrom.labelPosition,model:e.projectFrom,"label-width":"130px"}},[r("el-form-item",{attrs:{id:"basic",label:"基本信息",required:""}},[r("el-upload",{attrs:{action:e.upload_qiniu_url,data:e.qiniuData,"list-type":"picture-card","file-list":e.projectFrom.basicArray,limit:1,"before-upload":e.beforeUpload,"on-preview":e.handlePictureCardPreview,"on-success":e.success,"on-error":e.handleError}},[r("i",{staticClass:"el-icon-plus"})]),e._v(" "),r("span",{staticClass:"suggest"},[e._v("建议尺寸：690*430px")]),e._v(" "),r("el-dialog",{attrs:{visible:e.projectFrom.basicImg,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.projectFrom,"basicImg",t)}}},[r("img",{attrs:{width:"100%",src:e.projectFrom.moreImages,alt:""}})])],1),e._v(" "),r("el-form-item",{staticClass:"basic-title",attrs:{label:"商品标题",required:""}},[r("el-input",{attrs:{placeholder:"请输入商品标题"},on:{change:e.changeValue},model:{value:e.projectFrom.title,callback:function(t){e.$set(e.projectFrom,"title",t)},expression:"projectFrom.title"}})],1),e._v(" "),r("el-form-item",{staticClass:"basic-funds",attrs:{label:"投资资金",required:""}},[r("el-input",{attrs:{onkeyup:"this.value = this.value.replace(/[^\\d.]/g,'');"},model:{value:e.projectFrom.fundsFirst,callback:function(t){e.$set(e.projectFrom,"fundsFirst",e._n(t))},expression:"projectFrom.fundsFirst"}},[r("template",{slot:"append"},[e._v("万")])],2),e._v("\n          -  \n        "),r("el-input",{attrs:{onkeyup:"this.value = this.value.replace(/[^\\d.]/g,'');"},model:{value:e.projectFrom.fundsSecond,callback:function(t){e.$set(e.projectFrom,"fundsSecond",e._n(t))},expression:"projectFrom.fundsSecond"}},[r("template",{slot:"append"},[e._v("万")])],2)],1),e._v(" "),r("el-form-item",{attrs:{label:"商品展示图",required:""}},[r("el-upload",{attrs:{action:e.upload_qiniu_url,data:e.qiniuData,"list-type":"picture-card","file-list":e.projectFrom.basicArray1,limit:5,"before-upload":e.beforeUpload1,"on-preview":e.handlePictureCardPreview1,"on-success":e.success1,multiple:!0}},[r("i",{staticClass:"el-icon-plus"})]),e._v(" "),r("span",{staticClass:"suggest"},[e._v("建议尺寸：690*690px，最多上传五张")]),e._v(" "),r("el-dialog",{attrs:{visible:e.projectFrom.basicImg1,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.projectFrom,"basicImg1",t)}}},[r("img",{attrs:{width:"100%",src:e.projectFrom.moreImages1,alt:""}})])],1),e._v(" "),r("el-form-item",{attrs:{label:"联系人",required:""}},[r("el-input",{attrs:{placeholder:"请输入联系人"},model:{value:e.projectFrom.contact,callback:function(t){e.$set(e.projectFrom,"contact",t)},expression:"projectFrom.contact"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"所在地区",required:""}},[r("el-cascader",{attrs:{placeholder:"请选择省/市/区",options:e.cityData},on:{change:e.getArea},model:{value:e.projectFrom.area,callback:function(t){e.$set(e.projectFrom,"area",t)},expression:"projectFrom.area"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"所属行业",required:""}},[r("el-select",{attrs:{placeholder:"请选择所属行业"},on:{change:e.getIndustry},model:{value:e.projectFrom.industry,callback:function(t){e.$set(e.projectFrom,"industry",t)},expression:"projectFrom.industry"}},e._l(e.industry,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-form-item",{staticClass:"basic-title",attrs:{label:"融资用途",required:""}},[r("el-input",{attrs:{placeholder:"请输入融资用途"},model:{value:e.projectFrom.financing,callback:function(t){e.$set(e.projectFrom,"financing",t)},expression:"projectFrom.financing"}})],1),e._v(" "),r("h3",{staticClass:"infos-title"},[e._v("股权融资")]),e._v(" "),r("el-form-item",{staticClass:"basic-funds",attrs:{label:"资金方占股比例",required:""}},[r("el-input",{attrs:{onkeyup:"this.value = this.value.replace(/[^\\d.]/g,'');"},model:{value:e.projectFrom.shareFirst,callback:function(t){e.$set(e.projectFrom,"shareFirst",e._n(t))},expression:"projectFrom.shareFirst"}},[r("template",{slot:"append"},[e._v("%")])],2),e._v("\n          -  \n        "),r("el-input",{attrs:{onkeyup:"this.value = this.value.replace(/[^\\d.]/g,'');"},model:{value:e.projectFrom.shareSecond,callback:function(t){e.$set(e.projectFrom,"shareSecond",e._n(t))},expression:"projectFrom.shareSecond"}},[r("template",{slot:"append"},[e._v("%")])],2)],1),e._v(" "),r("el-form-item",{attrs:{label:"最短退出年限",required:""}},[r("el-input",{attrs:{onkeyup:"this.value = this.value.replace(/[^\\d.]/g,'');"},model:{value:e.projectFrom.minimumYears,callback:function(t){e.$set(e.projectFrom,"minimumYears",e._n(t))},expression:"projectFrom.minimumYears"}},[r("template",{slot:"append"},[e._v("年")])],2)],1)],1)],1)])},staticRenderFns:[]};var l={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"detailed"},[this._v("详情信息")])},staticRenderFns:[]};var n={inject:["reload"],name:"Publish",data:function(){return{prevStep:1,nextStep:2}},components:{Info:r("VU/8")(o,i,!1,function(e){r("uQRb")},"data-v-c10583e8",null).exports,Detailed:r("VU/8")({name:"Detailed",data:function(){return{}}},l,!1,function(e){r("FwQn")},"data-v-4614e3cb",null).exports},mounted:function(){},methods:{cancel:function(){this.reload()},previous:function(){store.commit("getStep",this.prevStep),this.reload()},nextSteps:function(){return console.log(this.$refs.getDataValue.projectFrom),0==this.$refs.getDataValue.projectFrom.basicImgList.length?(this.$message({type:"error",message:"基本信息不能为空",offset:80}),!1):""==this.$refs.getDataValue.projectFrom.title?(this.$message({type:"error",message:"商品标题不能为空",offset:80}),!1):""==this.$refs.getDataValue.projectFrom.fundsFirst||0===this.$refs.getDataValue.projectFrom.fundsFirst?(this.$message({type:"error",message:"请输入正确的投资资金",offset:80}),!1):""==this.$refs.getDataValue.projectFrom.fundsSecond||0===this.$refs.getDataValue.projectFrom.fundsSecond?(this.$message({type:"error",message:"请输入正确的投资资金",offset:80}),!1):this.$refs.getDataValue.projectFrom.fundsFirst>this.$refs.getDataValue.projectFrom.fundsSecond?(this.$message({type:"error",message:"投资资金范围输入错误",offset:80}),!1):0==this.$refs.getDataValue.projectFrom.basicImgList1.length?(this.$message({type:"error",message:"商品展示图不能为空",offset:80}),!1):""==this.$refs.getDataValue.projectFrom.contact?(this.$message({type:"error",message:"联系人不能为空",offset:80}),!1):""==this.$refs.getDataValue.projectFrom.areaList?(this.$message({type:"error",message:"所在地区不能为空",offset:80}),!1):""==this.$refs.getDataValue.projectFrom.industryVlue?(this.$message({type:"error",message:"所属行业不能为空",offset:80}),!1):""==this.$refs.getDataValue.projectFrom.financing?(this.$message({type:"error",message:"融资用途不能为空",offset:80}),!1):""==this.$refs.getDataValue.projectFrom.shareFirst&&0===this.$refs.getDataValue.projectFrom.shareFirst?(this.$message({type:"error",message:"资金方占股比例不能为空",offset:80}),!1):""==this.$refs.getDataValue.projectFrom.shareSecond&&0===this.$refs.getDataValue.projectFrom.shareSecond?(this.$message({type:"error",message:"资金方占股比例不能为空",offset:80}),!1):this.$refs.getDataValue.projectFrom.shareFirst>this.$refs.getDataValue.projectFrom.shareSecond?(this.$message({type:"error",message:"资金方占股比例范围输入错误",offset:80}),!1):""==this.$refs.getDataValue.projectFrom.minimumYears&&0===this.$refs.getDataValue.projectFrom.minimumYears?(this.$message({type:"error",message:"请输入正确的最短退出年限",offset:80}),!1):(store.commit("getUserInfo",this.$refs.getDataValue.projectFrom),void store.commit("getStep",this.nextStep))},carryOut:function(){this.reload(),store.commit("getStep",this.prevStep)}}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"publish"},[r("div",{staticClass:"headers-top"},[r("p",[r("el-steps",{attrs:{active:e.$store.state.project.step,simple:""}},[r("el-step",{staticClass:"first-step",attrs:{title:" 基本信息"}}),e._v(" "),r("el-step",{staticClass:"second-step",attrs:{title:" 详情信息"}})],1)],1)]),e._v(" "),r("div",{staticClass:"publish-content"},[1==e.$store.state.project.step?r("div",[r("Info",{ref:"getDataValue"})],1):r("div",[r("Detailed")],1)])]),e._v(" "),r("div",{staticClass:"btn-list"},[1==e.$store.state.project.step?r("el-button",{on:{click:e.cancel}},[e._v("取消")]):e._e(),e._v(" "),2==e.$store.state.project.step?r("el-button",{on:{click:e.previous}},[e._v("上一步")]):e._e(),e._v(" "),1==e.$store.state.project.step?r("el-button",{attrs:{type:"primary"},on:{click:e.nextSteps}},[e._v("下一步")]):e._e(),e._v(" "),2==e.$store.state.project.step?r("el-button",{attrs:{type:"primary"},on:{click:e.carryOut}},[e._v("完成")]):e._e()],1)])},staticRenderFns:[]};var u=r("VU/8")(n,c,!1,function(e){r("YXbA")},"data-v-157d5c68",null);t.default=u.exports},YXbA:function(e,t){},uQRb:function(e,t){}});
//# sourceMappingURL=8.6b73c61ba4374c239c42.js.map