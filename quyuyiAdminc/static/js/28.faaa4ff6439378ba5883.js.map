{"version":3,"sources":["webpack:///src/components/tree/TreeItem.vue","webpack:///./src/components/tree/TreeItem.vue?eb8f","webpack:///./src/components/tree/TreeItem.vue","webpack:///src/components/tree/Tree.vue","webpack:///./src/components/tree/Tree.vue?b5c4","webpack:///./src/components/tree/Tree.vue"],"names":["TreeItem","name","props","model","Object","url","String","isEdit","type","Boolean","default","nodes","parentState","created","data","c1","c2","c3","isSelected","open","beginEdit","watch","val","this","computed","isFolder","children","length","methods","toggle","_this","selected","handleClick","parentId","opened","isParent","$http","get","params","pid","id","then","resp","vue_esm","set","forEach","n","path","p","push","catch","e","console","log","addChild","_this2","child","sort","handleAdd","$message","error","deleteChild","_this3","confirm","confirmButtonText","cancelButtonText","handleDelete","info","editChild","_this4","$nextTick","$refs","focus","afterEdit","handleEdit","node","$emit","tree_TreeItem","render","_vm","_h","$createElement","_c","_self","staticClass","class","on","click","_v","_s","_e","directives","rawName","value","expression","ref","domProps","$event","stopPropagation","blur","keydown","indexOf","_k","keyCode","key","input","target","composing","$set","attrs","icon","color","mouseover","mouseout","dense","transition","_l","index","staticRenderFns","components_tree_TreeItem","__webpack_require__","normalizeComponent","ssrContext","Tree","treeData","Array","db","components","verify","getData","$router","copyNodeInfo","deleteById","arr","src","i","d","splice","o","tree_Tree","Tree_Component","Tree_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/28.faaa4ff6439378ba5883.js","sourcesContent":["<template>\n  <div>\n    <v-list-tile\n      @click=\"toggle\" class=\"level1 pt-0 pb-0 mt-0 mb-0\" :class=\"{'selected':isSelected}\">\n      <v-list-tile-avatar>\n        <v-icon v-if=\"model.isParent\">{{open ? 'folder_open' : 'folder'}}</v-icon>\n        <v-icon v-if=\"!model.isParent\">insert_drive_file</v-icon>\n      </v-list-tile-avatar>\n      <v-list-tile-content>\n        <v-list-tile-title v-show=\"!beginEdit\">\n          <span >{{model.name}}</span>\n        </v-list-tile-title>\n        <input v-show=\"beginEdit\" @click.stop=\"\" :ref=\"model.id\" v-model=\"model.name\"\n               @blur=\"afterEdit\" @keydown.enter=\"afterEdit\"/>\n      </v-list-tile-content>\n      <v-list-tile-action v-if=\"isEdit\">\n        <v-btn  icon @mouseover=\"c1='primary'\" @mouseout=\"c1=''\" :color=\"c1\" @click.stop=\"addChild\">\n          <i class=\"el-icon-plus\"/>\n        </v-btn>\n      </v-list-tile-action>\n      <v-list-tile-action v-if=\"isEdit\">\n        <v-btn icon @mouseover=\"c2='success'\" @mouseout=\"c2=''\" :color=\"c2\" @click.stop=\"editChild\">\n          <i class=\"el-icon-edit\"/>\n        </v-btn>\n      </v-list-tile-action>\n      <v-list-tile-action v-if=\"isEdit\">\n        <v-btn icon @mouseover=\"c3='error'\" @mouseout=\"c3=''\" :color=\"c3\" @click.stop=\"deleteChild\">\n          <i class=\"el-icon-delete\"/>\n        </v-btn>\n      </v-list-tile-action>\n    </v-list-tile>\n\n    <v-list v-if=\"isFolder\" v-show=\"open\" class=\"ml-4 pt-0 pb-0\" dense transition=\"scale-transition\">\n      <tree-item\n        class=\"item\"\n        v-for=\"(model, index) in model.children\"\n        :key=\"index\"\n        :model=\"model\"\n        :url=\"url\"\n        :isEdit=\"isEdit\"\n        :nodes=\"nodes\"\n        :parentState=\"open\"\n        @handleAdd=\"handleAdd\"\n        @handleEdit=\"handleEdit\"\n        @handleDelete=\"handleDelete\"\n        @handleClick=\"handleClick\"\n      >\n      </tree-item>\n    </v-list>\n  </div>\n</template>\n\n<script>\n  import Vue from 'vue'\n\n  export default {\n    name: \"tree-item\",\n    props: {\n      model: Object,\n      url: String,\n      isEdit: {\n        type: Boolean,\n        default: false\n      },\n      nodes: Object,\n      parentState:Boolean\n    },\n    created() {\n    },\n    data: function () {\n      return {\n        c1: '',\n        c2: '',\n        c3: '',\n        isSelected: false,\n        open:false,\n        beginEdit:false,\n      }\n    },\n    watch:{\n      parentState(val){\n        if(!val){\n          this.open = val;\n        }\n      }\n    },\n    computed: {\n      isFolder: function () {\n        return this.model.children &&\n          this.model.children.length > 0\n      }\n    },\n    methods: {\n      toggle: function () {\n        // 将其它被选中项取消选中\n        this.nodes.selected.isSelected = false;\n        // 当前项被选中\n        this.isSelected = true;\n        // 保存当前选中项\n        this.nodes.selected = this\n\n        // 客户自己的点击事件回调\n        this.handleClick(this.model);\n\n        // 判断是否为顶级节点，顶级节点需要记录和替换\n        if(this.model.parentId == 0){\n          // 判断打开节点是否是自己\n          if(this.nodes.opened && this != this.nodes.opened){\n            // 不是，则关闭原来的节点\n            this.nodes.opened.open = false;\n          }\n          // 将自己记录为打开的节点\n          this.nodes.opened = this;\n        }\n        // 切换开闭状态\n        this.open = !this.open;\n        // 如果已经是叶子节点,或者自己是关闭的，或者自己已经有儿子了，结束\n        if (!this.model.isParent || this.isFolder || !this.open) {\n          return;\n        }\n        // 展开后查询子节点\n        this.$http.get(this.url, {params: {pid: this.model.id}})\n          .then(resp => {\n          Vue.set(this.model, 'children', resp.data);\n          // 封装当前节点的路径\n          this.model.children.forEach(n => {\n            n['path'] = [];\n            this.model.path.forEach(p => n['path'].push(p));\n            n['path'].push(n.name);\n          });\n        }).catch( e => {\n          console.log(e);\n        });\n      },\n      addChild: function () {\n        this.$http.get(this.url,{params: {pid:-1}}).then(resp => {\n          let child = {\n            id: resp.data[0].id+1,\n            name: '新的节点',\n            parentId: this.model.id,\n            isParent: false,\n            sort:this.model.children? this.model.children.length + 1:1\n          };\n          if (this.isSelected) {\n            if (!this.model.isParent) {\n              Vue.set(this.model, 'children', [child]);\n              this.model.isParent = true;\n              this.open = true;\n              this.handleAdd(child);\n            } else {\n              if (!this.isFolder) {\n                this.$http.get(this.url, {params: {pid: this.model.id}}).then(resp => {\n                  Vue.set(this.model, 'children', resp.data);\n                  this.model.children.push(child);\n                  this.open = true;\n                  this.handleAdd(child);\n                });\n              } else {\n                this.model.children.push(child);\n                this.open = true;\n                this.handleAdd(child);\n              }\n            }\n          }else {\n            this.$message.error(\"选中后再操作！\");\n          }\n        });\n      },\n      deleteChild: function () {\n        this.$message.confirm('此操作将永久删除数据，是否继续?', '提示', {\n          confirmButtonText: '确定删除',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.handleDelete(this.model.id);\n        }).catch(() => {\n          this.$message.info('已取消删除');\n        })\n      },\n      editChild() {\n        this.beginEdit = true;\n        this.$nextTick(() => this.$refs[this.model.id].focus());\n      },\n      afterEdit() {\n        //原来是错的，多了个model\n        if (this.beginEdit) {\n          this.beginEdit = false;\n          this.handleEdit(this.model.id, this.model.name);\n        }\n      },\n      handleAdd(node) {\n        this.$emit(\"handleAdd\", node);\n      },\n      handleDelete(id) {\n        this.$emit(\"handleDelete\", id);\n      },\n      handleEdit(id, name) {\n        this.$emit(\"handleEdit\", id, name)\n      },\n      handleClick(node) {\n        this.$emit(\"handleClick\", node);\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .level1 {\n    height: 40px;\n  }\n\n  .selected {\n    background-color: rgba(105,184,249,0.75);\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tree/TreeItem.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-list-tile',{staticClass:\"level1 pt-0 pb-0 mt-0 mb-0\",class:{'selected':_vm.isSelected},on:{\"click\":_vm.toggle}},[_c('v-list-tile-avatar',[(_vm.model.isParent)?_c('v-icon',[_vm._v(_vm._s(_vm.open ? 'folder_open' : 'folder'))]):_vm._e(),_vm._v(\" \"),(!_vm.model.isParent)?_c('v-icon',[_vm._v(\"insert_drive_file\")]):_vm._e()],1),_vm._v(\" \"),_c('v-list-tile-content',[_c('v-list-tile-title',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.beginEdit),expression:\"!beginEdit\"}]},[_c('span',[_vm._v(_vm._s(_vm.model.name))])]),_vm._v(\" \"),_c('input',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.beginEdit),expression:\"beginEdit\"},{name:\"model\",rawName:\"v-model\",value:(_vm.model.name),expression:\"model.name\"}],ref:_vm.model.id,domProps:{\"value\":(_vm.model.name)},on:{\"click\":function($event){$event.stopPropagation();},\"blur\":_vm.afterEdit,\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.afterEdit($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.model, \"name\", $event.target.value)}}})],1),_vm._v(\" \"),(_vm.isEdit)?_c('v-list-tile-action',[_c('v-btn',{attrs:{\"icon\":\"\",\"color\":_vm.c1},on:{\"mouseover\":function($event){_vm.c1='primary'},\"mouseout\":function($event){_vm.c1=''},\"click\":function($event){$event.stopPropagation();return _vm.addChild($event)}}},[_c('i',{staticClass:\"el-icon-plus\"})])],1):_vm._e(),_vm._v(\" \"),(_vm.isEdit)?_c('v-list-tile-action',[_c('v-btn',{attrs:{\"icon\":\"\",\"color\":_vm.c2},on:{\"mouseover\":function($event){_vm.c2='success'},\"mouseout\":function($event){_vm.c2=''},\"click\":function($event){$event.stopPropagation();return _vm.editChild($event)}}},[_c('i',{staticClass:\"el-icon-edit\"})])],1):_vm._e(),_vm._v(\" \"),(_vm.isEdit)?_c('v-list-tile-action',[_c('v-btn',{attrs:{\"icon\":\"\",\"color\":_vm.c3},on:{\"mouseover\":function($event){_vm.c3='error'},\"mouseout\":function($event){_vm.c3=''},\"click\":function($event){$event.stopPropagation();return _vm.deleteChild($event)}}},[_c('i',{staticClass:\"el-icon-delete\"})])],1):_vm._e()],1),_vm._v(\" \"),(_vm.isFolder)?_c('v-list',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.open),expression:\"open\"}],staticClass:\"ml-4 pt-0 pb-0\",attrs:{\"dense\":\"\",\"transition\":\"scale-transition\"}},_vm._l((_vm.model.children),function(model,index){return _c('tree-item',{key:index,staticClass:\"item\",attrs:{\"model\":model,\"url\":_vm.url,\"isEdit\":_vm.isEdit,\"nodes\":_vm.nodes,\"parentState\":_vm.open},on:{\"handleAdd\":_vm.handleAdd,\"handleEdit\":_vm.handleEdit,\"handleDelete\":_vm.handleDelete,\"handleClick\":_vm.handleClick}})}),1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0a85b683\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tree/TreeItem.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0a85b683\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TreeItem.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TreeItem.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TreeItem.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0a85b683\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TreeItem.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0a85b683\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tree/TreeItem.vue\n// module id = null\n// module chunks = ","<template>\n  <v-list class=\"pt-0 pb-0\" dense>\n    <TreeItem\n      class=\"item\" :model=\"model\" v-for=\"(model, index) in db\" :key=\"index\"\n      :url=\"url\"\n      :isEdit=\"isEdit\"\n      :nodes=\"nodes\"\n      @handleAdd=\"handleAdd\"\n      @handleEdit=\"handleEdit\"\n      @handleDelete=\"handleDelete\"\n      @handleClick=\"handleClick\"\n    />\n  </v-list>\n</template>\n\n<script>\n  import TreeItem from './TreeItem';\n\n  export default {\n    name: \"vTree\",\n    props: {\n      url: String,\n      isEdit: {\n        type: Boolean,\n        default: false\n      },\n      treeData:{\n        type:Array\n      }\n    },\n    data() {\n      return {\n        db: [],\n        nodes:{\n          opened:null,\n          selected:{isSelected:false}\n        }\n      }\n    },\n    components: {\n      TreeItem\n    },\n    created() {\n      if(this.treeData && this.treeData.length > 0){\n        this.db = this.treeData;\n        return;\n      }\n\n      this.verify().then(() => {\n        this.getData();\n      }).catch(() => {\n        this.$router.push(\"/login\");\n      });\n    },\n    methods: {\n      getData() {\n        this.$http.get(this.url, {params: {pid: 0}}).then(resp => {\n          this.db = resp.data;\n          this.db.forEach(n => n['path'] = [n.name])\n        })\n      },\n      handleAdd(node) {\n        this.$emit(\"handleAdd\", this.copyNodeInfo(node));\n      },\n      handleEdit(id, name) {\n        this.$emit(\"handleEdit\", id, name)\n      },\n      handleDelete(id) {\n        this.deleteById(id, this.db);\n        this.$emit(\"handleDelete\", id);\n      },\n      handleClick(node){\n        this.$emit(\"handleClick\", this.copyNodeInfo(node))\n      },\n      // 根据id删除\n      deleteById(id, arr) {\n        let src = arr || this.db;\n        for (let i in src) {\n          let d = src[i];\n          if (d.id === id) {\n            src.splice(i, 1)\n            return;\n          }\n          if (d.children && d.children.length > 0) {\n            this.deleteById(id, d.children)\n          }\n        }\n      },\n      copyNodeInfo(node){\n        const o = {};\n        for(let i in node){\n          o[i] = node[i];\n        }\n        return o;\n      }\n    },\n    watch: {}\n  }\n</script>\n\n<style scoped>\n  .item {\n    cursor: pointer;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tree/Tree.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-list',{staticClass:\"pt-0 pb-0\",attrs:{\"dense\":\"\"}},_vm._l((_vm.db),function(model,index){return _c('TreeItem',{key:index,staticClass:\"item\",attrs:{\"model\":model,\"url\":_vm.url,\"isEdit\":_vm.isEdit,\"nodes\":_vm.nodes},on:{\"handleAdd\":_vm.handleAdd,\"handleEdit\":_vm.handleEdit,\"handleDelete\":_vm.handleDelete,\"handleClick\":_vm.handleClick}})}),1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-af5b82d6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tree/Tree.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-af5b82d6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Tree.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Tree.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Tree.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-af5b82d6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Tree.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-af5b82d6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tree/Tree.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}