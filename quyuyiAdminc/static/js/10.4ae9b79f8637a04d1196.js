webpackJsonp([10],{"5Ygz":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),r=n.n(a);function l(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(r,l){try{var o=t[r](l),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)});e(s)}("next")})}}var o={name:"refundTable",props:["formInline"],data:function(){return{tableData:[],orderDetailsList:[],multipleSelection:[],rowsPerPage:10,page:1,total:0,pageSizes:[10,15,20,25]}},methods:{search:function(){null!==this.formInline.orderSeach&&(""!=this.formInline.proName&&null!=this.formInline.proName||this.$message({type:"success",message:"请选择订单搜索类别",offset:80})),0==localStorage.getItem("id")?this.$message({type:"error",message:"请先认证店铺信息",offset:80}):0==localStorage.getItem("id")?this.$message({type:"error",message:"请先认证店铺信息",offset:80}):this.init()},init:function(){var e=this;return l(r.a.mark(function t(){var n,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={page:e.page,rows:e.rowsPerPage,storeId:localStorage.getItem("id"),startTime:e.formInline.starTime,endTime:e.formInline.endTime,keyType:e.formInline.orderSeach,keyValue:e.formInline.proName,orderStatus:e.formInline.returns,refundStatus:e.formInline.negotiation,refundType:e.formInline.ship},t.next=3,e.$Http.refundOrder(n);case 3:0===(a=t.sent).code&&(e.total=a.data.total,e.tableData=a.data.items,e.orderDetailsList=[]);case 5:case"end":return t.stop()}},t,e)}))()},handleSelectionChange:function(e){this.multipleSelection=e,this.$emit("child-event",e.length)},handleSizeChange:function(e){},handleCurrentChange:function(e){},nextPage:function(){this.page+=1},prevPage:function(){this.page-=1},exportData:function(){var e=this;return l(r.a.mark(function t(){var n,a,l,o,s,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],a=0;a<e.multipleSelection.length;a++)n.push(e.multipleSelection[a].subOrderId);return l={orderId:n.join()},t.next=5,e.$Http.refundExport(l,!0,{responseType:"blob"});case 5:(o=t.sent).size>0?(s=document.createElement("a"),i=new Blob([o],{type:"application/vnd.ms-excel"}),s.style.display="none",s.href=URL.createObjectURL(i),s.download="趋于一退款列表",document.body.appendChild(s),s.click(),document.body.removeChild(s)):e.$message({type:"error",message:"导出失败",offset:80});case 7:case"end":return t.stop()}},t,e)}))()},examineSuccess:function(e){var t=this;return l(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.$confirm("是否同意退款, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(l(r.a.mark(function n(){var a;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a={orderId:e.subOrderId,state:3},n.next=3,t.$Http.examineSuccess(a,!0);case 3:0===n.sent.code&&(t.$message({type:"success",message:"退款成功",offset:80}),t.init());case 5:case"end":return n.stop()}},n,t)}))).catch(function(){});case 1:case"end":return n.stop()}},n,t)}))()},examineDestruction:function(e){var t=this;return l(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.$confirm("是否拒绝退款, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(l(r.a.mark(function n(){var a;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a={orderId:e.subOrderId,state:2},n.next=3,t.$Http.examineSuccess(a,!0);case 3:0===n.sent.code&&(t.$message({type:"success",message:"取消退款成功",offset:80}),t.init());case 5:case"end":return n.stop()}},n,t)}))).catch(function(){});case 1:case"end":return n.stop()}},n,t)}))()},monInit:function(e){this.init()}},created:function(){0==localStorage.getItem("id")?this.$message({type:"error",message:"请先认证店铺信息",offset:80}):this.init()}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"refundTable"},[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData,"tooltip-effect":"dark",id:"out-table"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"商品图片",width:"120"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("img",{attrs:{src:e.row.itemImage,width:"50",height:"50",alt:""}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"商品名称","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticStyle:{display:"block","text-align":"left"}},[e._v("订单号:  "+e._s(t.row.subOrderId))]),e._v(" "),n("span",{staticStyle:{display:"block","text-align":"left"}},[e._v("商品名:  "+e._s(t.row.itemTitle))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"prices",label:"单价",width:"100","show-overflow-tooltip":"",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"退款金额",width:"100","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(Number(t.row.refundPrices).toFixed(2)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"发货状态","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?n("span",{staticStyle:{color:"#F56C6C"}},[e._v("待付款")]):2==t.row.status?n("span",{staticStyle:{color:"#F56C6C"}},[e._v("已付款(待发货)")]):3==t.row.status?n("span",{staticStyle:{color:"#F56C6C"}},[e._v("已发货(交接中)")]):4==t.row.status?n("span",{staticStyle:{color:"#67C23A"}},[e._v("交易成功(用户确认收货)")]):5==t.row.status?n("span",{staticStyle:{color:"#F56C6C"}},[e._v("取消订单")]):6==t.row.status?n("span",{staticStyle:{color:"#F56C6C"}},[e._v("退款待处理")]):7==t.row.status?n("span",{staticStyle:{color:"#F56C6C"}},[e._v("已拒绝退款")]):8==t.row.status?n("span",{staticStyle:{color:"#F56C6C"}},[e._v("退款成功")]):9==t.row.status?n("span",{staticStyle:{color:"#F56C6C"}},[e._v("退款关闭")]):n("span",{staticStyle:{color:"#F56C6C"}},[e._v('订单未付款，已过期"')])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"退款方式","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.refundType?n("span",{staticStyle:{color:"#F56C6C"}},[e._v("仅退货（换件商品）")]):2==t.row.refundType?n("span",{staticStyle:{color:"#F56C6C"}},[e._v("退货退款")]):3==t.row.refundType?n("span",{staticStyle:{color:"#F56C6C"}},[e._v("退款")]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"refundMessage",label:"退款原因","show-overflow-tooltip":"",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"refundCreateTime",label:"申请时间","show-overflow-tooltip":"",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"退款状态","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.refundStatus?n("span",{staticStyle:{color:"#F56C6C"}},[e._v("退款待处理")]):2==t.row.refundStatus?n("span",{staticStyle:{color:"#F56C6C"}},[e._v("已拒绝退款")]):3==t.row.refundStatus?n("span",{staticStyle:{color:"#67C23A"}},[e._v("退款成功")]):n("span",{staticStyle:{color:"#F56C6C"}},[e._v("退款关闭")])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-link",{attrs:{type:"primary",underline:!1,disabled:1!==t.row.refundStatus},on:{click:function(n){return e.examineSuccess(t.row)}}},[e._v("同意")]),e._v("\n         \n        "),n("el-link",{attrs:{type:"primary",underline:!1,disabled:1!==t.row.refundStatus},on:{click:function(n){return e.examineDestruction(t.row)}}},[e._v("取消")])]}}])})],1),e._v(" "),n("div",{staticClass:"pages"},[n("el-pagination",{staticClass:"tablePagin",attrs:{background:"","page-sizes":e.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:e.total,"pager-count":5,"page-size":e.rowsPerPage,"current-page":e.page},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:pageSize":function(t){e.rowsPerPage=t},"update:page-size":function(t){e.rowsPerPage=t},"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"prev-click":e.prevPage,"next-click":e.nextPage}})],1)],1)},staticRenderFns:[]};var i={name:"Refund",inject:["reload"],data:function(){return{timeArray:[],formInline:{orderSeach:null,proName:"",starTime:"",endTime:"",refund:0,returns:6,ship:null,negotiation:""},orderOptions:[{value:0,label:"商品名称"},{value:1,label:"退款编号"},{value:2,label:"运单号"},{value:3,label:"手机号"}],returnsOptions:[{value:1,label:"待付款"},{value:2,label:"已付款"},{value:3,label:"已发货"},{value:4,label:"交易已成功"},{value:5,label:"交易关闭"},{value:6,label:"退款/售后"}],shipOptions:[{value:1,label:"仅退货（换件商品）"},{value:2,label:"退货退款"},{value:3,label:"退款"}],negotiationOptions:[{value:1,label:"退款待处理"},{value:2,label:"已拒绝退款"},{value:3,label:"退款成功"},{value:4,label:"退款关闭"}],num:0}},components:{refundTable:n("VU/8")(o,s,!1,function(e){n("CX76")},"data-v-b0205678",null).exports},methods:{search:function(){this.formInline.starTime=this.timeArray[0],this.formInline.endTime=this.timeArray[1],this.$refs.refundTable.search()},reset:function(){this.reload()},exportData:function(){this.$refs.refundTable.exportData()},monInit:function(e){this.$refs.refundTable.monInit(e)},parentEvent:function(e){this.num=e,console.log("this.num",this.num)}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"refund"},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"search-form"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[n("el-form-item",{staticClass:"btn-01",attrs:{label:"订单搜索"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.orderSeach,callback:function(t){e.$set(e.formInline,"orderSeach",t)},expression:"formInline.orderSeach"}},e._l(e.orderOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),null!==e.formInline.orderSeach?n("el-form-item",{staticClass:"btn-02"},[n("el-input",{attrs:{placeholder:"请输入关键词"},model:{value:e.formInline.proName,callback:function(t){e.$set(e.formInline,"proName",t)},expression:"formInline.proName"}})],1):e._e(),n("br"),e._v(" "),n("el-form-item",{staticClass:"btn-03",attrs:{label:"申请时间"}},[n("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeArray,callback:function(t){e.timeArray=t},expression:"timeArray"}})],1),n("br"),e._v(" "),n("el-form-item",{staticClass:"btn-04",attrs:{label:"订单状态"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.returns,callback:function(t){e.$set(e.formInline,"returns",t)},expression:"formInline.returns"}},e._l(e.returnsOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-form-item",{staticClass:"btn-05",attrs:{label:"退款方式"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.ship,callback:function(t){e.$set(e.formInline,"ship",t)},expression:"formInline.ship"}},e._l(e.shipOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),n("br"),e._v(" "),n("el-form-item",{staticClass:"btn-06",attrs:{label:"退款状态"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:e.monInit},model:{value:e.formInline.negotiation,callback:function(t){e.$set(e.formInline,"negotiation",t)},expression:"formInline.negotiation"}},e._l(e.negotiationOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),n("br"),e._v(" "),n("el-form-item",{staticClass:"btn-07"},[n("el-button",{on:{click:e.search}},[e._v("查询")]),e._v(" "),n("el-button",{on:{click:e.reset}},[e._v("重置")]),e._v(" "),0==e.num?n("el-button",{attrs:{disabled:!0}},[e._v("导出数据")]):n("el-button",{on:{click:e.exportData}},[e._v("导出数据")])],1)],1)],1),e._v(" "),n("div",{staticClass:"tables"},[n("refundTable",{ref:"refundTable",attrs:{formInline:e.formInline},on:{"child-event":e.parentEvent}})],1)])],1)},staticRenderFns:[]};var u=n("VU/8")(i,c,!1,function(e){n("DoP6")},"data-v-65a95c46",null);t.default=u.exports},CX76:function(e,t){},DoP6:function(e,t){}});
//# sourceMappingURL=10.4ae9b79f8637a04d1196.js.map